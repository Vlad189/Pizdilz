scripted_gui = {
	#### GUI FOR SELECTING COUNTRY TO NEGOTIATE WITH
	TE_peace_terms_set_ui = {
		window_name = "TE_start_peace_terms_window"
        #context_type = selected_country_context
		#parent_window_name = diplomatic_actions
		#### Main variables used for peace process communication
		# VICTOR.var_TE_peace_offer_available@LOSER = 0/1 - unlocks country selection GUI - should be targeted, right? 
		# LOSER.var_TE_has_sent_offer@VICTOR = 0/1 - Conditional peace only - so that you cant sent the same offer twice. 
		# VICTOR.var_TE_has_started_treaty@LOSER = 0/1 - Set to 1 when clicking the button in this GUI 
		# VICTOR.var_TE_has_sent_treaty@LOSER = 0/1 - set to 1 when "DONE" with peace treaty, used to complete mission timer and kick off peace. 
		# VICTOR.var_TE_number_peace_offers_accepted = x # Counter, can be used to show how many peace treaties the player needs to work with
		
		
		
		visible = {
			#has_war_with = ROOT # just to be sure 
			#check_variable = { ROOT.var_TE_peace_offer_available@THIS = 1 } #  only visible if has targeted Peace approach
			check_variable = { ROOT.var_TE_show_peace_gui = 0 } # don't show if peace gui is open - do one peace treaty at a time. 
			check_variable = { ROOT.show_war_list = 1 }
		
		}
		
		effects = {
			TE_close_country_selec_btn_click = {
				set_variable = { ROOT.show_war_list = 0 }
			
			}
            TE_start_neg_btn_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_1 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_1  }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_1  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_1 }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_1 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_1 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			
			 TE_start_neg_btn_2_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_2 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_2  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_2 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_2  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_2 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_2 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			
			TE_start_neg_btn_3_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_3 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_3  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_3 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var:ROOT.var_TE_target_no_3  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_3 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_3 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_4_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_4 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_4  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_4 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_4  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_4 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_4 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_5_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_5 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_5  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_5 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_5  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_5 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_5 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_6_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_6 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_6  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_6 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_6 }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_6 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_6 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_7_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_7 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_7  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_7 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_7  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_7 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_7 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_8_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_8 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_8  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_8 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_8  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_8 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_8 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_9_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_9 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_9  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_9 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_9  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_9 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_9 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_10_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_10 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_10  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_10 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_10  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_10 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_10 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
			TE_start_neg_btn_11_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_11 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_11  }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_11 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_11  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_11 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_11 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
           	TE_start_neg_btn_12_click = {
				# set target and war type for target
				set_variable = { ROOT.var_TE_target_country = var:ROOT.var_TE_target_no_3 }
				set_variable = { ROOT.var_TE_war_type = ROOT.var_TE_war_type@var:ROOT.var_TE_target_no_12 }
				set_variable = { ROOT.var_TE_peace_type = ROOT.var_TE_peace_type@var:ROOT.var_TE_target_no_12 }
				set_variable = { ROOT.var_TE_war_scope = ROOT.var_TE_war_scope@var:ROOT.var_TE_target_no_12  }
				set_temp_variable = { temp_cost = 0 }
				TE_get_total_peace_points = yes 
			
				# open window
				set_variable = { ROOT.var_TE_show_peace_gui = 1 } # Opens the window
				set_variable = { ROOT.var_TE_has_started_treaty@var:ROOT.var_TE_target_no_12 = 1 } # so if timer runs out, the LOSER knows we at least have started
				set_variable = { ROOT.var_TE_peace_offer_available@var:ROOT.var_TE_target_no_12 = 0 }# as we have started the treaty work we don't need this. Possibly change in the future if it bugs up saves, but it really shouldn't
				subtract_from_variable = { ROOT.var_TE_number_peace_offers_accepted = 1 } # decrease counter for unnegotiated peace treaties
				set_variable = { ROOT.show_war_list = 0 } # closes this window 
            }
        }
		triggers = {
            TE_start_neg_btn_click_enabled = {
                check_variable = { ROOT.var_TE_show_peace_gui = 0 } # possibly close window as well
            }
            TE_start_neg_btn_visible = {
				check_variable = { var:ROOT.var_TE_target_no_1  >0 }
            }
			TE_start_neg_btn_2_visible = {
				check_variable = { var:ROOT.var_TE_target_no_2  >0 }
            }
			TE_start_neg_btn_3_visible = {
				check_variable = { var:ROOT.var_TE_target_no_3  >0 }
            }
			TE_start_neg_btn_4_visible = {
				check_variable = { var:ROOT.var_TE_target_no_4  >0 } 
            }
			TE_start_neg_btn_5_visible = {
				check_variable = { var:ROOT.var_TE_target_no_5 >0 }
            }
			TE_start_neg_btn_6_visible = {
				check_variable = { var:ROOT.var_TE_target_no_6  >0 } 
            }
			TE_start_neg_btn_7_visible = {
				check_variable = { var:ROOT.var_TE_target_no_7  >0 }
            }
			TE_start_neg_btn_8_visible = {
				check_variable = { var:ROOT.var_TE_target_no_8  >0 }
            }
			TE_start_neg_btn_9_visible = {
				check_variable = { var:ROOT.var_TE_target_no_9  >0 }
            }
			TE_start_neg_btn_10_visible = {
				check_variable = { var:ROOT.var_TE_target_no_10  >0 }
            }
			TE_start_neg_btn_11_visible = {
				check_variable = { var:ROOT.var_TE_target_no_11 >0 }
            }
			TE_start_neg_btn_12_visible = {
				check_variable = { var:ROOT.var_TE_target_no_12  >0 }
            }
        }
		
		ai_enabled = {
            always = no
		}
		
		ai_test_interval = 100 
        ai_test_variance = 50    
		 
		ai_test_scopes = test_enemy_countries
        
        ai_check = {
			check_variable = { ROOT.var_TE_show_peace_gui = 0 } # don't show if peace gui is open - do one peace treaty at a time. 
			check_variable = { ROOT.show_war_list = 1 }
			
        }
        
       
		
		ai_weights = {
			# Go from Top
			TE_start_neg_btn_click = {
				ai_will_do = {
					factor = 1
					
				}
			}
		}
			
	}
	
	
}